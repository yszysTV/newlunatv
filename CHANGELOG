## [5.4.0] - 2025-09-14

### Added

- 🎬 短剧完整功能集成：全面集成短剧搜索、播放、详情展示功能
- 📱 短剧移动端API代理路由：为移动端提供专用的短剧API代理，解决跨域问题
- 💾 短剧缓存系统：集成短剧缓存到管理员系统，提供完整的缓存管理功能
- 🎯 短剧专用详情页面布局：避免与豆瓣详情冲突，提供专门的短剧展示界面
- 📊 播放统计系统：完整的播放数据统计和分析功能
- 🎮 弹幕面板移动端优化：基于ArtPlayer挂载逻辑的精确定位

### Changed

- 🔄 短剧内容过滤优化：防止短剧显示豆瓣/Bangumi数据，确保数据源纯净
- 📐 移动端弹幕面板定位逻辑：改进CSS定位算法，提升移动端体验
- 🎵 移动端弹幕面板操作：简化为点击切换机制，避免复杂手势冲突
- 🔍 内容筛选功能优化：移除所有内容类型（电影、剧集、综艺、动漫）的快捷筛选功能，避免与普通筛选冲突
- 🎛️ 侧边栏高亮修复：改进导航状态同步机制

### Fixed

- 🔧 短剧API路由缓存问题：添加HTTP缓存控制头，解决移动端缓存不刷新问题
- 📱 移动端API代理循环依赖：解决短剧功能的循环依赖问题
- 🎯 短剧详情显示优化：防止显示0集数，添加双重保护机制
- ⭐ 短剧评分显示：隐藏零评分内容，优化用户体验
- 🎮 播放统计Redis错误：修复KVRocks JSON解析错误
- 📐 移动端弹幕面板定位：修复音量控制悬停状态的定位问题
- 🔊 音量控制交互优化：修复移动端音量按钮hover状态异常问题
- 🔄 视频播放器问题：修复动漫筛选和视频播放相关bug

---

## [5.3.2] - 2025-09-13

### Added

- 🎯 弹幕设置菜单交互优化：添加桌面端hover延迟交互机制（300ms显示，500ms隐藏）
- ⚡ 弹幕菜单性能大幅优化：实现防抖机制，解决开启弹幕时调节字幕大小卡顿问题
- 🔄 事件监听器全面优化：为位置调整、方向变化、DOM观察器添加防抖处理，提升整体性能
- 🎮 AI推荐系统令牌优化：默认最大令牌数从1000提升至3000，改善AI响应质量

### Changed

- 🛠️ 基于ArtPlayer原生拖拽逻辑实现精确弹幕菜单修复
- 🔍 DOM观察器优化：减少监听范围，仅观察必要的class变化
- ⏱️ 增强定时器清理机制：防止内存泄漏，确保所有定时器正确释放
- 📐 弹幕面板位置算法重构：使用CSS默认定位替代复杂的手动计算

### Fixed

- 🔧 修复弹幕配置菜单全屏模式定位问题：改进CSS定位算法，确保各种屏幕模式下正确显示
- 🖱️ 解决进度条拖拽与弹幕菜单冲突：基于ArtPlayer原生拖拽逻辑实现精确修复
- 📱 修复移动端弹幕菜单定位算法：纠正位置计算逻辑，适配不同设备屏幕
- 🎯 弹幕面板点击事件冲击修复：解决弹幕面板阻挡进度条点击的核心问题
- 🧹 AI聊天历史自动清理机制修复：优化历史记录管理和清理逻辑
- 🔄 移除播放器设置中的重复弹幕切换选项：简化用户界面
- 💡 弹幕菜单CSS hover冲突解决：精确控制hover状态与进度条拖拽的交互
- 📋 完善弹幕菜单hover行为：统一移动端和桌面端交互逻辑，提供一致用户体验

---

## [5.3.1] - 2025-09-11

### Added

- 🎥 AI推荐系统YouTube视频链接解析：支持直接解析YouTube视频链接并获取视频信息
- 🔍 AI推荐卡片三种类型支持：影视推荐卡片、YouTube视频卡片、视频链接解析卡片

### Enhanced

- 🚀 升级react-window到v2.1.0：性能优化提升虚拟滚动效率
- 📺 升级hls.js到v1.6.12：改进视频播放稳定性和兼容性
- 🎬 YouTube搜索功能增强：支持时间筛选和排序选项
- 🔄 直播源自动刷新功能：支持localStorage持久化配置
- 🎯 电影快速筛选按钮：新增类型快速访问功能
- 📱 TV节目和综艺节目筛选扩展：完善筛选功能覆盖
- 🎮 YouTube直播播放器优化：实时视频信息获取功能

### Fixed

- 🔧 修复AI聊天列表项空格过多问题：优化markdown格式处理逻辑
- 📝 解决AI响应中项目符号间距过大问题：移除多余的margin-bottom样式
- 🎵 修复外部弹幕拖拽进度条后显示异常问题：改进弹幕同步机制
- 🔍 修复YouTube搜索缓存键和内容类型筛选问题：优化缓存管理策略
- 📺 修复TV节目和综艺节目MultiLevelSelector缺失initialValues属性问题
- 🛠️ 解决DoubanSelector中的TypeScript编译错误
- 🎯 修复平台筛选状态同步问题：改进TV节目筛选器状态管理
- 🔗 使用YouTube无cookie域名：减少机器人验证问题
- 📊 修复搜索历史显示问题：优化历史记录展示逻辑
- 🔝 修复播放页面返回顶部按钮显示问题

---

## [5.3.0] - 2025-09-10

### Added

- 🎥 YouTube集成: 完整的YouTube搜索和直播播放功能
  - 集成YouTube Data API v3搜索功能
  - 支持iframe直接播放YouTube视频
  - 管理后台YouTube API配置面板
  - YouTube缓存管理系统（参考网盘实现）
  - YouTube搜索结果缓存统计和管理
- 🔧 AI推荐系统: 增强的AI内容推荐功能
  - 动态提示词和模型管理优化
  - 支持GPT-5/o系列模型的max_completion_tokens
  - 改进推荐UI和卡片显示计数器
  - 优化推理模型空响应处理
- 📱 TVBox安全配置: 全面的TVBox集成
  - 通过管理后台完整配置TVBox安全设置
  - API优化和安全性增强
  - 配置面板移动端UI优化
- 🎬 iPad/iOS视频播放优化: 全面的移动端播放改进
  - 基于ArtPlayer兼容性模式的智能设备检测
  - iOS特定自动播放策略（静音启动+音量恢复）
  - 基于官方源码优化的HLS.js配置
  - 多重尝试自动播放重试机制，提升成功率
  - 移动设备内存管理优化

### Changed

- 🚀 搜索性能: 智能搜索优化和状态管理
  - 切换搜索类型时清除网盘搜索状态
  - 功能切换时的缓存绕过改进
  - 防止功能禁用时的无限重试循环
- 🎯 移动端UI: 响应式设计改进
  - TVBox配置移动端显示优化（token复制/重新生成按钮）
  - 配置面板移动端布局改进
- 💾 缓存管理: 统一缓存系统增强
  - 管理员端点缺失的配置缓存清理
  - YouTube集成到完整缓存管理基础设施
  - 所有搜索类型的数据库缓存统计（YouTube、网盘、豆瓣、弹幕）
- 🏗️ HLS.js优化: 基于官方源码的移动设备流媒体改进
  - 缓冲策略：iOS13+ 8秒，iOS 10秒，桌面30秒
  - 内存管理：iOS13+ 20MB，iOS 30MB缓冲大小
  - 加载策略：移动端优化的超时和重试策略
  - ABR优化：移动设备更快的码率切换
- 🔧 代码质量: 增强的TypeScript支持和错误处理
  - EventListener API兼容性改进
  - 复杂函数中的变量作用域管理优化
  - 改进错误边界和回退机制
- 📦 架构: 遵循现有模式的模块化YouTube集成
  - 与其他搜索功能一致的API端点结构
  - 跨所有搜索类型的统一缓存管理
  - 遵循既定模式的配置管理

### Fixed

- 🔄 修复功能禁用时网盘搜索卡死问题
- 🛠️ 解决功能禁用场景下的无限重试循环
- 🔧 修复TVBox安全配置移动端UI截断问题
- 📱 修正AI推荐卡片显示并防止无效链接点击
- 🎵 修复GPT-5/推理模型因token限制导致的空响应
- 🔨 解决EventListenerOptions的TypeScript编译错误
- 📊 修复管理面板中YouTube缓存统计显示问题
- 🎭 改进配置缓存管理的错误处理

---

## [5.2.1] - 2025-09-08

### Fixed

- 🔧 修复 ArtPlayer 5.3.0 SSR 兼容性问题：通过动态导入解决服务端渲染时的 window 对象访问错误
- 📱 修复直播页面 ArtPlayer SSR 问题：实现相同的动态导入策略，避免 Cannot read properties of undefined 错误  
- 🛠️ 修复 TypeScript 编译错误：为 onSwitch 函数参数添加正确的类型注解
- 🔍 修复 searchFromApi 函数作用域问题：解决 apiBaseUrl 变量访问范围导致的编译错误
- 💾 修复 Docker 构建缓存问题：添加无缓存标志和依赖验证，确保新版本依赖正确应用
- 🎬 修复 ArtPlayer 5.3.0 销毁序列错误：优化播放器实例清理流程，防止运行时错误
- 🚫 移除不必要的视频元素存在性检查：简化销毁流程，提高稳定性

### Enhanced

- 🎯 实现智能搜索优化：新增搜索查询变体生成器，自动尝试多种搜索模式提高命中率
- 🔄 优化豆瓣/bangumi 点击搜索：解决手动搜索能找到但点击找不到的标题空格匹配问题
- ⚡ 智能搜索变体支持：自动生成去空格、关键词组合等搜索变体，支持中餐厅 第九季→中餐厅第九季等转换
- 🎬 播放页面搜索增强：在播放页面集成智能搜索变体，提升豆瓣内容的片源搜索成功率
- 💬 弹幕插件 v5.2.0 优化：
  - 启用 useWorker: true 实现基于 Web Worker 的弹幕位置计算
  - 减少 lockTime: 2 降低拖拽延迟，提升交互响应性
  - 实现基于设备性能的智能配置：
    - 高性能设备：启用完整功能，包含防重叠算法 + Worker
    - 中等性能设备：选择性防重叠 + Worker
    - 低性能设备：禁用防重叠但保持同步 + Worker，减少 maxLength 至 30
  - 保持 synchronousPlayback: true 确保所有设备的一致用户体验
  - 优化拖拽/窗口变化事件处理，改进防抖机制

### Technical Improvements  

- 🏗️ ArtPlayer 动态导入架构：重构播放器初始化流程，支持客户端只加载，完全兼容 Next.js SSR
- 🔨 代码质量优化：修复 ESLint 导入排序警告，优化变量声明规范
- 📦 依赖版本同步：确保 package.json 和 pnpm-lock.yaml 版本一致性
- 🏗️ 改进 Docker 构建流程：优化缓存策略，确保依赖更新的可靠性
- 🔄 播放器实例管理优化：改进多实例冲突处理和 DOM 清理逻辑

---

## [5.2.0] - 2025-09-07

### Added

- 🎬 升级播放器核心：将 Artplayer 从 5.2.5 升级到 5.3.0，提升播放稳定性和性能
- 💬 升级弹幕插件：将 artplayer-plugin-danmuku 从 5.1.8 升级到 5.2.0，优化弹幕显示效果
- 📱 移动端底部导航增强：TVBox 设置集成到移动端底部导航，提升移动端管理便利性
- 🔍 PanSou 网盘搜索集成：集成高级筛选和用户体验优化的网盘搜索功能
- 🗂️ 网盘搜索优化：优化搜索算法和缓存管理，提升搜索响应速度和准确性
- 🎥 视频详情页网盘搜索：在播放/详情页面直接集成网盘搜索功能，一站式观影体验
- 🔄 Upstash Redis 缓存集成：完整集成 Upstash Redis 缓存系统，提升数据访问性能
- ⚡ KVRocks 缓存兼容：新增 KVRocks 存储类型特定处理，完善缓存兼容性支持

### Fixed

- 🔧 修复 TVBox 配置生成错误：解决 undefined API 导致的配置生成失败问题
- 💾 修复存储类型处理：完善 Upstash 和 KVRocks 缓存兼容性处理逻辑

---

## [5.1.0] - 2025-09-05

### Added

- 🚀 新增豆瓣弹幕API反IP封锁优化：智能延迟策略防止频繁请求被封
- 🔍 新增IPTV频道当前源内搜索功能：支持在当前直播源中快速搜索频道
- 📱 新增豆瓣页面虚拟滚动支持：提升大量内容加载性能和用户体验
- 🎵 新增EXT-X-MEDIA URI处理：防止HLS音轨加载错误导致播放失败
- 🎌 新增Bangumi API集成：实现动漫内容智能检测和信息获取
- 💾 新增Bangumi API缓存机制：提升动漫信息获取速度，减少重复请求
- 🏪 迁移到统一存储缓存：设置直连代理为默认选项，优化网络性能
- 📦 新增TVBox完整API兼容支持：实现完整的TVBox功能接口
- 📺 实现直播源聚合功能：解决多源限制问题，提升直播体验
- 🔧 更新视频解析器接口：新增健康检查机制，提升解析稳定性

### Changed

- ⚡ 优化豆瓣API请求智能延迟策略：根据请求频率动态调整延迟时间
- 🛡️ 改进HLS错误处理：防止keyLoadError导致页面冻结，提升播放稳定性
- ⚙️ 默认禁用源优化和速度测试：减少不必要的网络请求，提升启动速度
- 🚫 禁用TVBox API缓存：排除中间件认证，优化TVBox兼容性

### Fixed

- 🔗 修复聚合搜索结果传递douban_id参数到播放页面的问题
- 📱 修复移动端操作面板在虚拟滚动模式下的截断问题

---

## [5.0.0] - 2025-08-30

### Added

- 🌟 全新豆瓣详情增强显示：播放页面新增丰富的豆瓣电影/剧集信息展示
- ⭐ 豆瓣评分显示：带星级图标的直观评分展示
- 🎭 完整演职人员信息：导演、编剧、主演等详细信息
- 📅 首播/上映日期：智能区分电影和剧集显示格式
- ⏱️ 时长信息：支持电影总片长和剧集单集时长显示
- 🌍 制作信息：国家/地区、语言、集数等标签展示

### Enhanced

- 🔧 豆瓣API解析引擎完全重构：基于真实HTML结构精确解析
- 📺 剧集支持：完美解析中国电视剧信息（如《生万物》）
- 🎥 电影支持：准确提取国际电影数据（如《坏蛋联盟2》）
- 🎨 动漫支持：全面兼容日本动画作品（如《怪兽8号》）
- 👥 多演员处理：正确解析多导演、多编剧、大型演员阵容
- 🌐 多语言适配：支持中文、英文、日文等不同语言内容

### Fixed

- 🐛 修复豆瓣详情API解析失败问题：重新设计HTML结构匹配算法
- 🔄 解决首播日期重复显示问题：优化日期提取逻辑，避免'首播:首播:'格式错误
- ✨ 修复演职人员信息缺失：使用精确的CSS选择器匹配豆瓣页面真实结构
- 🎯 优化豆瓣评分显示：新增星级图标和颜色区分，提升视觉体验

### Breaking Changes

- 🚨 主版本升级至5.0.0：豆瓣详情系统重大改进，API响应格式优化
- 📊 豆瓣详情数据结构调整：新增多个字段，删除重复内容显示

---

## [4.3.7] - 2025-08-30

### Added

- 🚀 高性能弹幕系统优化：实现基于设备性能的智能弹幕渲染策略，自动检测CPU核心数、内存容量和设备类型
- 🎯 设备性能分级渲染：高性能设备启用完整功能，中等性能设备适度优化，低性能设备激进优化，确保流畅播放
- 💻 Web端专用弹幕输入按钮：新增简洁的弹字按钮，支持一键快速发送弹幕，仅在Web浏览器显示，避免移动端UI拥挤
- ⚡ CSS硬件加速优化：为低性能设备启用GPU硬件加速，使用transform和will-change属性优化弹幕动画性能

### Improved

- 🧠 智能弹幕过滤器：保持完整弹幕数量的同时，只过滤可能影响性能的超长弹幕和特殊字符弹幕
- 🎨 自适应弹幕配置：根据设备性能自动调整防重叠算法、同步播放等计算密集型功能的启用策略

### Changed

- 🎛️ 弹幕渲染策略重构：从减少弹幕数量改为优化渲染性能，确保用户体验不受影响
- 🖥️ 响应式UI设计：弹幕输入功能仅在Web端启用，移动端专注于播放体验，避免UI元素冲突
- ⚙️ 设备检测算法：基于硬件并发数、内存限制和设备类型计算综合性能评分，实现精准的性能分级

### Technical

- 🛠️ TypeScript类型安全：修复弹幕插件类型定义兼容性问题，使用const assertion确保类型正确性
- 🔧 代码架构优化：重构弹幕性能检测逻辑，采用工厂模式根据设备性能生成最优配置
- 📊 性能监控增强：添加详细的性能等级日志输出，便于调试和性能分析

---

## [4.3.6] - 2025-08-30

### Added

- 🚀 新增虚拟滑动功能：搜索结果支持虚拟化渲染，显著提升大量结果的加载性能
- 📱 智能响应式网格：根据屏幕尺寸自动调整列数（2-8列），完美适配手机到桌面端
- ⚡ 渐进式加载：搜索结果分批加载（初始12项，滚动时自动加载更多），优化首屏体验
- 🎛️ 虚拟滑动开关：用户可在搜索页面自由切换虚拟滑动和传统网格显示模式
- 🔧 智能容器尺寸检测：采用ResizeObserver监听容器变化，确保布局始终准确

### Changed

- 🎨 优化搜索结果渲染性能：使用react-window 2.0.0进行DOM节点虚拟化，减少内存占用
- 📐 改进响应式布局算法：基于实际容器宽度动态计算最优列数和项目尺寸
- 🔄 升级加载状态显示：新增容器尺寸初始化进度提示，提升用户体验

### Fixed

- 🐛 修复首次搜索时虚拟滑动布局偏移问题：解决容器尺寸计算时序导致的初始布局错误
- ⏱️ 修复容器引用挂载时机问题：优化useLayoutEffect执行顺序，确保DOM元素正确绑定
- 🔧 修复react-window 2.0.0 API兼容性：适配新版本的cellComponent和cellProps参数结构

## [4.3.5] - 2025-08-29

### Added

- 新增Chromecast投屏功能：支持将视频内容投射到Chromecast设备
- Chromecast智能浏览器检测：仅在真正的Chrome浏览器中显示Chromecast按钮
- 排除厂商浏览器显示Chromecast：自动识别并排除OPPO、小米、华为、三星等厂商浏览器

### Changed

- 优化弹幕控制按钮显示策略：只显示配置按钮，隐藏切换按钮和发射器以节省空间

### Fixed

- 修复小屏幕设备控制栏按钮被推出画面的问题：优化弹幕插件控制按钮占用空间
- 修复移动端弹幕配置按钮不显示的问题：调整width参数确保移动端正确显示
- 修复OPPO等厂商浏览器错误显示Chromecast按钮的问题：增加OppoBrowser和HeyTapBrowser识别

## [4.3.4] - 2025-08-28

### Added

- 新增弹幕数据智能缓存机制：支持localStorage持久化存储，30分钟缓存有效期
- 缓存支持页面刷新保持：重新打开页面时自动复用缓存数据，避免重复请求
- 智能缓存键生成：基于影片标题、年份、豆瓣ID、集数生成唯一缓存标识
- 智能过期清理机制：每次缓存更新时自动清理过期数据，保持localStorage整洁

### Changed

- 优化切换集数时的弹幕加载逻辑：统一使用缓存优先策略，提升切换速度
- 改进弹幕API调用性能：相同集数重复访问时直接使用缓存，减少服务器压力
- 增强状态同步机制：弹幕缓存键使用最新state值而非ref值，确保数据一致性

### Fixed

- 修复切换集数时弹幕数据未清空的问题：现在使用正确的load()方法清空弹幕
- 修复页面刷新后缓存失效的问题：改用localStorage替代内存缓存
- 修复缓存键生成时机过早导致的缓存未命中问题
- 修复ESLint编译错误：规范变量声明和Map迭代语法

## [4.3.3] - 2025-08-28

### Fixed

- 修复外部弹幕开关按钮点击延迟和无响应问题，现在切换更加流畅
- 修复关闭外部弹幕后仍显示弹幕的问题，现在会完全清空弹幕数据
- 修复快速切换外部弹幕开关时的竞态条件问题，避免状态不一致
- 修复弹幕显示区域调整无效的问题，现在可以正确控制弹幕显示范围
- 恢复弹幕加载提示功能，现在会显示'已加载 X 条弹幕'或'暂无弹幕数据'

### Added

- 新增弹幕字号动态调整：支持小号(18px)、默认(25px)、大号(32px)、特大(40px)四种规格
- 新增弹幕显示区域控制：支持1/4屏幕、1/2屏幕、3/4屏幕、全屏四种显示范围，避免遮挡重要画面
- 新增弹幕速度调节：支持极慢(10秒)到极快(1秒)五档速度，满足不同观看习惯
- 新增弹幕透明度设置：从完全透明(10%)到完全不透明(100%)五档透明度选择
- 新增按类型蒙蔽功能：支持选择性隐藏滚动、顶部、底部弹幕，用户可根据喜好过滤弹幕类型
- 新增弹幕防重叠开关：可开启/关闭弹幕重叠防护，优化密集弹幕显示效果
- 新增完善的弹幕配置错误处理机制，防止设置调整时播放器崩溃

### Improved

- 优化外部弹幕开关性能：使用Promise.resolve()替代setTimeout()实现更好的异步处理
- 改进弹幕显示区域配置：使用百分比值替代固定像素值，提升不同屏幕尺寸适配性
- 增强状态同步机制：防止React状态更新和ArtPlayer插件状态不一致导致的显示问题
- 所有弹幕设置均支持实时调整，无需刷新页面即可看到效果

## [4.3.2] - 2025-08-27

### Added

- 集成第三方弹幕API功能，支持从多个视频平台获取弹幕数据
- 新增caiji.cyou API集成，支持搜索真实视频内容而非预告片
- 支持腾讯视频、爱奇艺、优酷、B站等主流平台弹幕获取
- 智能内容匹配，自动过滤解说、预告等不相关内容
- 支持多平台弹幕数据合并和时间排序

### Fixed

- 修复弹幕API集数参数传递问题，现在切换集数时能正确获取对应集数的弹幕
- 改进集数匹配逻辑，支持多种URL格式
- 修复豆瓣链接解析只获取到预告片的问题
- 添加定时任务用户处理调试信息，便于排查删除用户仍出现的问题

### Changed

- 优化弹幕API超时机制，爱奇艺30秒、优酷25秒、其他平台20秒
- 改进弹幕数据格式转换，确保与ArtPlayer兼容
- 移除不合适的测试弹幕fallback逻辑

## [4.3.1] - 2025-08-27

### Added

- 新增用户自行注册功能
- 注册页面支持用户名、密码验证
- 管理员可配置是否允许用户注册
- 注册成功后自动登录

### Changed

- 登录页面在数据库模式下显示注册链接
- 增强用户名格式验证（3-20位字母数字下划线）
- 密码长度要求至少6位

## [4.3.0] - 2025-08-26

### Added

- 支持将 IPTV 频道添加到收藏中

### Changed

- 禁用 flv 直播，仅支持 m3u8 直播
- 降低代理 ts 分片的内存占用

## [4.2.1] - 2025-08-26

### Fixed

- 修复直播源加载失败或离开页面后依然无限加载的问题

## [4.2.0] - 2025-08-26

### Added

- 支持 flv 直播和直播地址解析到 mp4 的处理
- 增加直播台标的 proxy 以防止 cors
- 支持播放页选集分组的滚动翻页

### Changed

- 管理后台页面的按钮增加加载中的 UI

### Fixed

- /api/proxy/m3u8 仅对 m3u8 内容反序列化，降低内存和 CPU 消耗

## [4.1.1] - 2025-08-25

### Changed

- 增加对 url-tvg 和多 epg url 的支持

### Fixed

- 修复 epg 数据清洗中去重叠逻辑未考虑日期导致的问题

## [4.1.0] - 2025-08-24

### Added

- 解析 m3u 自带的 epg 和自定义 epg，增加今日节目单

### Changed

- 直播源数据刷新改为并发刷新

## [4.0.0] - 2025-08-24

### Added

- 增加 iptv 订阅和播放功能

### Changed

- 搜索页面视频卡片移动端/右键菜单添加豆瓣链接
- 搜索建议遵循色情过滤

## [3.2.1] - 2025-08-22

### Changed

- 新增色色过滤分类
- 调整搜索建议框层级

## [3.2.0] - 2025-08-22

### Added

- 视频源管理支持批量启用、禁用、删除
- 用户管理支持批量设置用户组
- 视频卡片右键/长按菜单新增新标签页播放

### Changed

- 视频卡片移动端 hover 时仅保留播放按钮
- 微调管理页面 UI 和视频卡片右键/长按菜单中的收藏样式

### Fixed

- 修复了搜索栏 enter 键自动选中第一个建议项的问题

## [3.1.2] - 2025-08-22

### Fixed

- 修复移动端卡片无法点击的问题

## [3.1.1] - 2025-08-21

### Fixed

- 修复了视频卡片 hover 的非播放按钮点击后进入播放页的问题

## [3.1.0] - 2025-08-21

### Added

- 增加用户组管理和用户组播放源限制
- 增加管理面板视频源有效性检查
- 搜索栏增加一键删除按钮

### Changed

- 放宽授权心跳对于网络问题的判断标准
- 统一管理面板弹窗使用 createPortal
- VideoCard 允许移动端响应 hover 事件
- 移动端布局 header 常驻，搜索按钮移动到 header 右侧
- 调大搜索接口超时时间

### Fixed

- 修复 bangumi 返回的整数评分无小数导致 UI 不对齐的问题

## [3.0.2] - 2025-08-20

### Changed

- 优化机器码生成逻辑

### Fixed

- 修复 redis url 不支持 rediss 协议的问题

## [3.0.1] - 2025-08-20

### Fixed

- 修复授权初始化错误

## [3.0.0] - 2025-08-20

### Added

- 防盗卖加固
- 支持自定义用户可用视频源

### Changed

- 右键视频卡片可弹出操作菜单

### Fixed

- 过滤掉集数为 0 的搜索结果

## [2.7.1] - 2025-08-17

### Fixed

- 修复 iOS 下版本面板可穿透滚动背景的问题

## [2.7.0] - 2025-08-17

### Added

- 视频卡片新增移动端操作面板，优化触控屏操作体验

### Changed

- 优化集数标题的匹配和展示逻辑

### Fixed

- 修复设置面板和修改密码面板背景可被拖动的问题

## [2.6.0] - 2025-08-17

### Added

- 新增搜索流式输出接口，并设置流式搜索为默认搜索接口，优化搜索体验
- 新增源站搜索结果内存缓存，粒度为源站+关键词+页数，缓存 10 分钟
- 新增豆瓣 CDN provided by @JohnsonRan

### Changed

- 搜索结果默认为无排序状态，不再默认按照年份排序
- 常规搜索接口无结果时，不再设置响应的缓存头
- 移除豆瓣数据源中的 cors-anywhere 方式

### Fixed

- 数据导出时导出站长密码，保证迁移到新账户时原站长用户可正常登录
- 聚合卡片优化移动端源信息展示

## [2.4.1] - 2025-08-15

### Fixed

- 对导入和 db 读取的配置文件做自检，防止 USERNAME 修改导致用户状态异常

## [2.4.0] - 2025-08-15

### Added

- 支持 kvrocks 存储（持久化 kv 存储）

### Fixed

- 修复搜索结果排序不稳定的问题
- 导入数据时同时更新内存缓存的管理员配置

## [2.3.0] - 2025-08-15

### Added

- 支持站长导入导出整站数据

### Changed

- 仅允许站长操作配置文件
- 微调搜索结果过滤面板的移动端样式

## [2.2.1] - 2025-08-14

### Fixed

- 修复了筛选 panel 打开时滚动页面 panel 不跟随的问题

## [2.2.0] - 2025-08-14

### Added

- 搜索结果支持按播放源、标题和年份筛选，支持按年份排序
- 搜索界面视频卡片展示年份信息，聚合卡片展示播放源

### Fixed

- 修复 /api/search/resources 返回空的问题
- 修复 upstash 实例无法编辑自定义分类的问题

## [2.1.0] - 2025-08-13

### Added

- 支持通过订阅获取配置文件

### Changed

- 微调部分文案和 UI
- 删除部分无用代码

## [2.0.1] - 2025-08-13

### Changed

- 版本检查和变更日志请求 Github

### Fixed

- 微调管理面板样式

## [2.0.0] - 2025-08-13

### Added

- 支持配置文件在线配置和编辑
- 搜索页搜索框实时联想
- 去除对 localstorage 模式的支持

### Changed

- 播放记录删除按钮改为垃圾桶图标以消除歧义

### Fixed

- 限制设置面板的最大长度，防止超出视口

## [1.1.1] - 2025-08-12

### Changed
- 修正 zwei 提供的 cors proxy 地址
- 移除废弃代码

### Fixed
- [运维] docker workflow release 日期使用东八区日期

## [1.1.0] - 2025-08-12

### Added
- 每日新番放送功能，展示每日新番放送的番剧

### Fixed
- 修复远程 CHANGELOG 无法提取变更内容的问题

## [1.0.5] - 2025-08-12

### Changed
- 实现基于 Git 标签的自动 Release 工作流

## [1.0.4] - 2025-08-11

### Added
- 优化版本管理工作流，实现单点修改

### Changed
- 版本号现在从 CHANGELOG 自动提取，无需手动维护 VERSION.txt

## [1.0.3] - 2025-08-11

### Changed

- 升级播放器 Artplayer 至版本 5.2.5

## [1.0.2] - 2025-08-11

### Changed

- 版本号比较机制恢复为数字比较，仅当最新版本大于本地版本时才认为有更新
- [运维] 自动替换 version.ts 中的版本号为 VERSION.txt 中的版本号

## [1.0.1] - 2025-08-11

### Fixed

- 修复版本检查功能，只要与最新版本号不一致即认为有更新

## [1.0.0] - 2025-08-10

### Added

- 基于 Semantic Versioning 的版本号机制
- 版本信息面板，展示本地变更日志和远程更新日志